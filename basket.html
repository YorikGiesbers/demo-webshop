<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Basket - Fruit Shop</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header role="banner">
      <div class="header-center">
        <a href="index.html" class="logo" aria-label="Go to homepage">
          <img
            src="img/fruit-shop-logo.png"
            class="logo-img"
            alt="Fruit Shop Logo"
          />
          <span class="products-text"> View Products </span>
        </a>
        <nav role="navigation" aria-label="Main navigation">
          <a
            href="basket.html"
            class="basket-link"
            aria-label="View shopping basket"
          >
            <img
              src="img/basket-icon.png"
              class="basket-img"
              alt="Shopping basket icon"
            />
            <span class="basket-text">View shopping basket</span>
          </a>
        </nav>
      </div>
    </header>
    <main id="main-content" role="main">
      <div class="content-box">
        <h1>Your Shopping Basket</h1>
        <button
          id="requestProductBtn"
          class="request-product-btn"
          aria-label="Request a custom product"
        >
          üìù Request Product
        </button>
        <ul
          class="order-list"
          id="basketList"
          aria-label="Shopping basket items"
        ></ul>
        <div class="cart-buttons-row" role="group" aria-label="Basket actions">
          <button id="clearBasket" aria-label="Clear all items from basket">
            Clear Basket
          </button>
          <a
            href="checkout.html"
            id="checkoutLink"
            aria-label="Proceed to checkout"
          >
            <button id="checkoutBtn">Checkout</button>
          </a>
        </div>
      </div>
    </main>
    <footer>
      <a
        href="https://www.linkedin.com/in/timlolkema/"
        target="_blank"
        rel="noopener noreferrer"
      >
        By Tim Lolkema
      </a>
    </footer>
    <div id="productRequestModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Request a Custom Product</h2>
          <button
            id="closeModalBtn"
            class="close-modal-btn"
            aria-label="Close modal"
          >
            ‚úï
          </button>
        </div>
        <form id="productRequestForm">
          <div class="form-group">
            <label for="productName">Product Name *</label>
            <input
              type="text"
              id="productName"
              name="productName"
              required
              placeholder="Enter product name"
            />
          </div>
          <div class="form-group">
            <label for="productDescription">Description *</label>
            <textarea
              id="productDescription"
              name="productDescription"
              required
              placeholder="Enter product description"
              rows="4"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="productLink">Reference Link</label>
            <input
              type="url"
              id="productLink"
              name="productLink"
              placeholder="https://example.com (optional)"
            />
          </div>
          <div class="modal-actions">
            <button type="submit" class="submit-btn">Add to Basket</button>
            <button type="button" id="cancelBtn" class="cancel-btn">Cancel</button>
          </div>
        </form>
      </div>
    </div>
    <script src="shop.js"></script>
    <script>
      const requestProductBtn = document.getElementById("requestProductBtn");
      const closeModalBtn = document.getElementById("closeModalBtn");
      const cancelBtn = document.getElementById("cancelBtn");
      const productRequestModal = document.getElementById("productRequestModal");
      const productRequestForm = document.getElementById("productRequestForm");

      requestProductBtn.onclick = function () {
        openProductRequestModal();
      };

      closeModalBtn.onclick = function () {
        closeProductRequestModal();
      };

      cancelBtn.onclick = function () {
        closeProductRequestModal();
      };

      productRequestModal.onclick = function (e) {
        if (e.target === productRequestModal) {
          closeProductRequestModal();
        }
      };

      productRequestForm.onsubmit = function (e) {
        e.preventDefault();
        const name = document.getElementById("productName").value;
        const description = document.getElementById("productDescription").value;
        const link = document.getElementById("productLink").value;
        addCustomProductToBasket(name, description, link);
        productRequestForm.reset();
        closeProductRequestModal();
        renderBasket();
      };

      renderBasket();
      document.getElementById("clearBasket").onclick = function () {
        clearBasket();
        renderBasket();
      };
    </script>
  </body>
</html>
